"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3414],{8609:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"tables/actions/registry/index","title":"Registry","description":"Serves as a single entry point for the Table\'s Entities and AccessPatterns (including EntityAccessPatterns):","source":"@site/docs/2-tables/2-actions/9-registry/index.md","sourceDirName":"2-tables/2-actions/9-registry","slug":"/tables/actions/registry/","permalink":"/docs/tables/actions/registry/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Registry","sidebar_custom_props":{"sidebarActionType":"util","new":true}},"sidebar":"tutorialSidebar","previous":{"title":"Utilities","permalink":"/docs/tables/actions/utilities/"},"next":{"title":"Parse Primary Key","permalink":"/docs/tables/actions/parse-primary-key/"}}');var r=t(74848),i=t(28453);const c={title:"Registry",sidebar_custom_props:{sidebarActionType:"util",new:!0}},d="Registry",a={},o=[{value:"Methods",id:"methods",level:2},{value:"<code>registerEntities(...)</code>",id:"registerentities",level:3},{value:"<code>registerAccessPatterns(...)</code>",id:"registeraccesspatterns",level:3},{value:"<code>build(...)</code>",id:"build",level:3},{value:"Properties",id:"properties",level:2},{value:"<code>entities</code>",id:"entities",level:3},{value:"<code>accessPatterns</code>",id:"accesspatterns",level:3},{value:"<code>query</code>",id:"query",level:3}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"registry",children:"Registry"})}),"\n",(0,r.jsxs)(s.p,{children:["Serves as a single entry point for the Table's ",(0,r.jsx)(s.a,{href:"/docs/entities/usage/",children:(0,r.jsx)(s.code,{children:"Entities"})})," and ",(0,r.jsx)(s.a,{href:"/docs/tables/actions/access-pattern/",children:(0,r.jsx)(s.code,{children:"AccessPatterns"})})," (including ",(0,r.jsx)(s.a,{href:"/docs/entities/actions/access-pattern/",children:(0,r.jsx)(s.code,{children:"EntityAccessPatterns"})}),"):"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"import { Registry } from 'dynamodb-toolbox/table/actions/registry'\n\nconst PokeRegistry = PokeTable.build(Registry)\n  .registerEntities(PokemonEntity, TrainerEntity, ...)\n  .registerAccessPatterns({ trainers, pokemonsByTrainerId })\n\n// Get an Entity by `entityName`\nPokeRegistry.entities.pokemon\n\n// Get an AccessPattern by key\nPokeRegistry.accessPatterns.trainers.query(...)\n\n// Or use the `.query` shorthand\nPokeRegistry.query.trainers(...)\n"})}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"Registry"})," also exposes a ",(0,r.jsx)(s.code,{children:".build(...)"})," method compatible with any ",(0,r.jsx)(s.a,{href:"/docs/getting-started/usage/#methods-vs-actions",children:(0,r.jsx)(s.code,{children:"Table Action"})}),". The ",(0,r.jsx)(s.code,{children:"Entities"})," registered in the ",(0,r.jsx)(s.code,{children:"Registry"})," are directly provided to the Action::"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"// \ud83d\ude4c Directly typed as `Pokemon | Trainer`\nconst { Items } = await PokeRegistry.build(QueryCommand)\n  .query({ partition: trainerId })\n  .send()\n"})}),"\n",(0,r.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h3,{id:"registerentities",children:(0,r.jsx)(s.code,{children:"registerEntities(...)"})}),"\n",(0,r.jsx)("p",{style:{marginTop:"-15px"},children:(0,r.jsx)("i",{children:(0,r.jsx)("code",{children:"(entities: ENTITIES) => Registry<TABLE, ENTITIES, ACCESS_PATTERNS>"})})}),"\n",(0,r.jsxs)(s.p,{children:["Registers the Table's ",(0,r.jsx)(s.code,{children:"Entities"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const PokeRegistry = PokeTable.build(Registry)\n  .registerEntities(PokemonEntity, TrainerEntity, ...)\n\n// Get an Entity by `entityName`\nPokeRegistry.entities.pokemon\n"})}),"\n",(0,r.jsx)(s.h3,{id:"registeraccesspatterns",children:(0,r.jsx)(s.code,{children:"registerAccessPatterns(...)"})}),"\n",(0,r.jsx)("p",{style:{marginTop:"-15px"},children:(0,r.jsx)("i",{children:(0,r.jsx)("code",{children:"(accessPatterns: ACCESS_PATTERNS) => Registry<TABLE, ENTITIES, ACCESS_PATTERNS>"})})}),"\n",(0,r.jsxs)(s.p,{children:["Registers the Table's ",(0,r.jsx)(s.code,{children:"AccessPatterns"}),". Accepts both ",(0,r.jsx)(s.a,{href:"/docs/tables/actions/access-pattern/",children:(0,r.jsx)(s.code,{children:"TableAccessPatterns"})})," and ",(0,r.jsx)(s.a,{href:"/docs/entities/actions/access-pattern/",children:(0,r.jsx)(s.code,{children:"EntityAccessPatterns"})}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const PokeRegistry = PokeTable.build(Registry)\n  .registerAccessPatterns({ trainers, pokemonsByTrainerId })\n\n// Get an AccessPattern by key\nPokeRegistry.accessPatterns.trainers.query(...)\n\n// ...or directly use the `.query` shorthand\nPokeRegistry.query.trainers(...)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"build",children:(0,r.jsx)(s.code,{children:"build(...)"})}),"\n",(0,r.jsx)("p",{style:{marginTop:"-15px"},children:(0,r.jsx)("i",{children:(0,r.jsx)("code",{children:"(tableAction?: ACTION) => ACTION<TABLE, ENTITIES>"})})}),"\n",(0,r.jsxs)(s.p,{children:["Builds a ",(0,r.jsx)(s.a,{href:"/docs/getting-started/usage/#methods-vs-actions",children:(0,r.jsx)(s.code,{children:"Table Action"})})," on the provided ",(0,r.jsx)(s.code,{children:"Table"}),". The ",(0,r.jsx)(s.code,{children:"Entities"})," registered in the ",(0,r.jsx)(s.code,{children:"Registry"})," are directly provided to the Action:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"// \ud83d\ude4c Directly typed as `Pokemon | Trainer`\nconst { Items } = await PokeRegistry.build(QueryCommand)\n  .query({ partition: trainerId })\n  .send()\n"})}),"\n",(0,r.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(s.h3,{id:"entities",children:(0,r.jsx)(s.code,{children:"entities"})}),"\n",(0,r.jsx)("p",{style:{marginTop:"-15px"},children:(0,r.jsx)("i",{children:(0,r.jsx)("code",{children:"Record<string, ENTITIES>"})})}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"Entities"})," registered in the ",(0,r.jsx)(s.code,{children:"Registry"}),", accessible by ",(0,r.jsx)(s.code,{children:"entityName"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const PokeRegistry = PokeTable.build(Registry)\n  .registerEntities(PokemonEntity, TrainerEntity, ...)\n\n// Get an Entity by `entityName`\nPokeRegistry.entities.pokemon\n"})}),"\n",(0,r.jsx)(s.h3,{id:"accesspatterns",children:(0,r.jsx)(s.code,{children:"accessPatterns"})}),"\n",(0,r.jsx)("p",{style:{marginTop:"-15px"},children:(0,r.jsx)("i",{children:(0,r.jsx)("code",{children:"ACCESS_PATTERNS"})})}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AccessPatterns"})," registered in the ",(0,r.jsx)(s.code,{children:"Registry"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const PokeRegistry = PokeTable.build(Registry)\n  .registerAccessPatterns({ trainers, pokemonsByTrainerId })\n\n// Get an AccessPattern by key\nPokeRegistry.accessPatterns.trainers.query(...)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"query",children:(0,r.jsx)(s.code,{children:"query"})}),"\n",(0,r.jsx)("p",{style:{marginTop:"-15px"},children:(0,r.jsx)("i",{children:(0,r.jsx)("code",{children:"Record<string, ACCESS_PATTERNS['query']>"})})}),"\n",(0,r.jsxs)(s.p,{children:["Shorthand access for the registered ",(0,r.jsx)(s.code,{children:"AccessPatterns"}),"' query methods:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"PokeRegistry.query.trainers(...)\n\n// \ud83d\udc47 Equivalent to\nPokeRegistry.accessPatterns.trainers.query(...)\n"})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>c,x:()=>d});var n=t(96540);const r={},i=n.createContext(r);function c(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);